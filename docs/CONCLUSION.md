# MCP Manager - ะะฐะบะปััะตะฝะธะต ะธ ะฟะปะฐะฝ ัะฐะฑะพัั

## ะกัะฐััั ะฟัะพะตะบัะฐ

### โ ะงัะพ ะฟะพะปะฝะพัััั ะณะพัะพะฒะพ

#### Backend (HTTP API Server)
- [x] HTTP ัะตัะฒะตั ะฝะฐ localhost:4040
- [x] WebSocket ะดะปั real-time ัะพะฑััะธะน
- [x] ะัะต CRUD ะพะฟะตัะฐัะธะธ ะดะปั ัะตัะฒะตัะพะฒ
- [x] ะัะต CRUD ะพะฟะตัะฐัะธะธ ะดะปั workspaces (Virtual Profiles)
- [x] Session management ะดะปั IDE extensions
- [x] Process Manager - ะทะฐะฟััะบ/ะพััะฐะฝะพะฒะบะฐ MCP ัะตัะฒะตัะพะฒ
- [x] Port Manager - ะฒัะดะตะปะตะฝะธะต ะฟะพััะพะฒ
- [x] Secret Store - ััะฐะฝะตะฝะธะต ัะตะบัะตัะพะฒ ะฒ OS keychain
- [x] MCP Gateway - ะฟัะพะบัะธัะพะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ ะบ ัะตัะฒะตัะฐะผ
- [x] Health checking ัะตัะฒะตัะพะฒ
- [x] ะะพะดะดะตัะถะบะฐ npx/pnpx/yarn/bunx/local ัะธะฟะพะฒ ัััะฐะฝะพะฒะบะธ

#### Virtual Profiles (VP) - ะะพะดะบะปััะตะฝะธะต
- [x] `POST /api/sessions/connect` - ะฟะพะดะบะปััะตะฝะธะต IDE ะฟะพ projectRoot
- [x] ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต VP ะตัะปะธ ะฝะต ัััะตััะฒัะตั
- [x] ะะพะธัะบ VP ะฟะพ ะฟััะธ (`findByProjectRoot`)
- [x] `GET /api/workspaces/by-path?path=...` - ะฟัะพะฒะตัะบะฐ ัััะตััะฒะพะฒะฐะฝะธั VP
- [x] Heartbeat ะผะตัะฐะฝะธะทะผ (`POST /api/sessions/ping`)
- [x] ะะพะทะฒัะฐั ัะฟะธัะบะฐ MCP ัะตัะฒะตัะพะฒ ะดะปั workspace
- [x] **sourceLabel** - ะธะดะตะฝัะธัะธะบะฐัะธั ะบะปะธะตะฝัะฐ (Cursor, VS Code, etc.)

#### Electron App
- [x] Main process ั IPC
- [x] Preload ัะบัะธะฟั ะดะปั ะฑะตะทะพะฟะฐัะฝะพะณะพ IPC
- [x] ะะฐะฟััะบ McpHost ะฟัะธ ััะฐััะต ะฟัะธะปะพะถะตะฝะธั
- [x] React renderer setup
- [x] **System Tray** - ัะฒะพัะฐัะธะฒะฐะฝะธะต ะฒ ััะตะน ะฟัะธ ะทะฐะบัััะธะธ ะพะบะฝะฐ
- [x] **Tray Menu** - ะดะธะฝะฐะผะธัะตัะบะพะต ะผะตะฝั ั ะบะพะปะธัะตััะฒะพะผ running ัะตัะฒะตัะพะฒ
- [x] **Graceful Shutdown** - ะบะพััะตะบัะฝะฐั ะพััะฐะฝะพะฒะบะฐ ะฒัะตั ะฟัะพัะตััะพะฒ ะฟัะธ ะฒััะพะดะต
- [x] **Force Kill** - ะฟัะธะฝัะดะธัะตะปัะฝะพะต ะทะฐะฒะตััะตะฝะธะต child processes (Windows)

#### UI ะะพะผะฟะพะฝะตะฝัั
- [x] Sidebar ั ะฝะฐะฒะธะณะฐัะธะตะน ะธ ัะฟะธัะบะพะผ workspaces
- [x] ServerList ะธ ServerCard
- [x] ServerDetailPage
- [x] SecretsView - ะณะปะพะฑะฐะปัะฝัะต ัะตะบัะตัั
- [x] ServerSecretsManager - ัะตะบัะตัั ัะตัะฒะตัะฐ
- [x] AddServerFlow - ะผะฐััะตั ะดะพะฑะฐะฒะปะตะฝะธั ัะตัะฒะตัะฐ
- [x] ServerConfigEditor - ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ
- [x] CreateWorkspaceModal - ัะพะทะดะฐะฝะธะต VP ั ะฒัะฑะพัะพะผ ะฟััะธ
- [x] EditWorkspaceModal - ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต VP
- [x] **AboutModal** - ะธะฝัะพัะผะฐัะธั ะพ ะฟัะธะปะพะถะตะฝะธะธ, ัััะปะบะธ, ะฐะฒัะพั
- [x] Titlebar ะบะฝะพะฟะบะธ (minimize/maximize/close โ tray)

---

### ๐ ะงัะพ ะฒ ะฟัะพัะตััะต / ััะตะฑัะตั ะดะพัะฐะฑะพัะบะธ

#### Virtual Profiles (VP) - ะะฐััะธัะตะฝะฝัะน ััะฝะบัะธะพะฝะฐะป
- [ ] **VP ะฝะฐัะปะตะดะพะฒะฐะฝะธะต ะพั Global**:
  - ะัะธ ัะพะทะดะฐะฝะธะธ VP ะบะพะฟะธััะตััั ัะฟะธัะพะบ ัะตัะฒะตัะพะฒ (ะฒะบะปััะตะฝั/ะฒัะบะปััะตะฝั)
  - ะะพะฟะธัััััั ะบะพะฝัะธะณะธ ัะตัะฒะตัะพะฒ
  - ะกะตะบัะตัั ะฝะฐัะปะตะดััััั (ะผะพะถะฝะพ ะฟะตัะตะพะฟัะตะดะตะปะธัั ะฝะฐ ััะพะฒะฝะต VP)
- [ ] **ะะตะทะฐะฒะธัะธะผะพััั VP** - ะธะทะผะตะฝะตะฝะธั ะฒ VP ะฝะต ะฒะปะธััั ะฝะฐ Global ะธ ะดััะณะธะต VP

#### ะกะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน (0% ะณะพัะพะฒะพ)
- [ ] Toast ะบะพะผะฟะพะฝะตะฝั (Sonner ะธะปะธ react-hot-toast)
- [ ] ะะปะพะฑะฐะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- [ ] ะฃะฒะตะดะพะผะปะตะฝะธั ะพะฑ ััะฟะตัะฝัั ะพะฟะตัะฐัะธัั

#### UI Polish
- [ ] Loading states ะดะปั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- [ ] Empty states (ะฝะตั ัะตัะฒะตัะพะฒ, ะฝะตั workspaces)
- [ ] Error states

---

### โ ะงัะพ ะฝะต ัะดะตะปะฐะฝะพ

#### VSCode Extension (ะดะปั MCP Manager)
- [ ] ะะฐะทะพะฒะฐั ััััะบัััะฐ extension
- [ ] ะะพะดะบะปััะตะฝะธะต ะบ MCP Manager host
- [ ] ะัะพะฑัะฐะถะตะฝะธะต ะดะพัััะฟะฝัั ัะตัะฒะตัะพะฒ ะฒ TreeView
- [ ] ะัะพะฑัะฐะถะตะฝะธะต ััะฐัััะฐ ัะตัะฒะตัะพะฒ
- [ ] Auto-connect ะฟัะธ ะพัะบัััะธะธ ะฟัะพะตะบัะฐ
- [ ] Status bar item ั ะบะพะปะธัะตััะฒะพะผ running ัะตัะฒะตัะพะฒ

#### ะขะตััะธัะพะฒะฐะฝะธะต
- [ ] Unit ัะตััั
- [ ] Integration ัะตััั
- [ ] E2E ัะตััั

#### ะะพะบัะผะตะฝัะฐัะธั
- [ ] README.md ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- [ ] API ะดะพะบัะผะตะฝัะฐัะธั
- [ ] ะะฝััััะบัะธั ะฟะพ ัะพะทะดะฐะฝะธั MCP ัะตัะฒะตัะพะฒ

---

## ะงัะพ ัะดะตะปะฐะฝะพ ัะตะณะพะดะฝั

### 1. System Tray
- ะะฐะบัััะธะต ะพะบะฝะฐ (X) ัะฒะพัะฐัะธะฒะฐะตั ะฒ ััะตะน, ะฝะต ะทะฐะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต
- Quit ะธะท ะผะตะฝั ััะตั - ะฟะพะปะฝัะน ะฒััะพะด ั ะบะพััะตะบัะฝะพะน ะพััะฐะฝะพะฒะบะพะน ะฒัะตั ะฟัะพัะตััะพะฒ
- ะะธะฝะฐะผะธัะตัะบะธะน tooltip ะธ ะผะตะฝั ะฟะพะบะฐะทัะฒะฐัั ะบะพะปะธัะตััะฒะพ running ัะตัะฒะตัะพะฒ
- Double-click ะฝะฐ ะธะบะพะฝะบะต ััะตั ะพัะบััะฒะฐะตั ะพะบะฝะพ

### 2. Graceful Shutdown
- `performQuit()` - ะฐัะธะฝััะพะฝะฝะฐั ััะฝะบัะธั ะฟะพะปะฝะพะน ะพัะธััะบะธ
- `mcpHost.stop()` ะพััะฐะฝะฐะฒะปะธะฒะฐะตั ะฒัะต MCP ัะตัะฒะตัั ัะตัะตะท `processManager.stopAll()`
- 10 ัะตะบัะฝะด timeout ะฝะฐ graceful shutdown
- `forceKillChildProcesses()` - safety net ะดะปั Windows (wmic + taskkill)

### 3. About Modal
- ะะตััะธั ะฟัะธะปะพะถะตะฝะธั
- ะะฟะธัะฐะฝะธะต ั ัััะปะบะพะน ะฝะฐ @tscodex/mcp-sdk
- ะกััะปะบะฐ ะฝะฐ ะพัะธัะธะฐะปัะฝัะน ัะฐะนั: https://tscodex.com/mcp-manager
- ะกััะปะบะฐ ะฝะฐ example server: @tscodex/mcp-server-example
- ะกััะปะบะฐ ะฝะฐ ะฒัะต ะฟะฐะบะตัั: npm search @tscodex
- ะะฒัะพั: unbywyd (unbywyd.com)
- ะะพะผะฟะฐะฝะธั: WebTo Pro (webto.pro)

### 4. Source Label ะดะปั Workspaces
- ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต `sourceLabel` ะฒ WorkspaceConfig
- API `/api/sessions/connect` ะฟัะธะฝะธะผะฐะตั `sourceLabel`
- API `/api/workspaces` ะฟัะธะฝะธะผะฐะตั `sourceLabel`
- Sidebar ะฟะพะบะฐะทัะฒะฐะตั sourceLabel (e.g., "Cursor") ะฒะผะตััะพ "API"

### 5. Workspace Reset to Global
- ะะพะฒัะน endpoint `POST /api/workspaces/:id/reset` - ัะฑัะพั ะฝะฐัััะพะตะบ workspace ะบ Global
- ะะฝะพะฟะบะฐ "Reset to Global" ะฒ ะผะตะฝั workspace (Sidebar)
- ะัะธัะฐะตั ะฒัะต ะฟะตัะตะพะฟัะตะดะตะปะตะฝะธั ะบะพะฝัะธะณััะฐัะธะน ัะตัะฒะตัะพะฒ ะดะปั workspace
- `WorkspaceStore.clearAllServerConfigs()` - ะพัะธััะบะฐ ะฒัะตั server configs

### 6. UX Improvements
- **Loading states**: ะะพะฑะฐะฒะปะตะฝั ัะฟะธะฝะฝะตัั ั ัะพะพะฑัะตะฝะธัะผะธ ะฒะพ ะฒัะตั ะบะพะผะฟะพะฝะตะฝัะฐั:
  - `ServerConfigEditor` - "Loading configuration..."
  - `ServerList` - "Loading servers..."
  - `SecretsView` - "Loading secrets..."
  - `ServerSecretsManager` - "Loading secrets..."
- **Fix validation flash**: ะะฐะปะธะดะฐัะธั ะฒ `ServerConfigEditor` ะฝะต ะทะฐะฟััะบะฐะตััั ะฟะพะบะฐ ะธะดะตั ะทะฐะณััะทะบะฐ (ัะฑัะฐะฝะพ ะผะธะณะฐะฝะธะต ะบัะฐัะฝัั ะพัะธะฑะพะบ)

---

## API ะดะปั IDE Extensions

### ะะพะดะบะปััะตะฝะธะต ั ะธะดะตะฝัะธัะธะบะฐัะธะตะน ะบะปะธะตะฝัะฐ

```typescript
// ะะพะดะบะปััะธัััั ั ัะบะฐะทะฐะฝะธะตะผ ะบะปะธะตะฝัะฐ
const connectResponse = await fetch('http://127.0.0.1:4040/api/sessions/connect', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    projectRoot: '/path/to/project',
    clientType: 'cursor',           // 'cursor' | 'vscode' | 'api'
    clientInstanceId: 'unique-id',
    sourceLabel: 'Cursor'           // NEW: Human-readable name
  })
});

const { sessionId, workspaceId, mcpServers } = await connectResponse.json();
```

### ะกะพะทะดะฐะฝะธะต workspace ัะตัะตะท API

```typescript
const response = await fetch('http://127.0.0.1:4040/api/workspaces', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    label: 'my-project',
    projectRoot: '/path/to/project',
    source: 'api',
    sourceLabel: 'Cursor'  // NEW: ะะพะบะฐะทัะฒะฐะตััั ะฒ UI
  })
});
```

---

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    MCP Manager (Electron)                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              McpHost (localhost:4040)                 โ  โ
โ  โ  - HTTP API                                           โ  โ
โ  โ  - WebSocket /events                                  โ  โ
โ  โ  - MCP Gateway /mcp/:serverId/:workspaceId           โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                              โ
โ  System Tray: Shows running servers count                   โ
โ  Quit โ stopAll() โ forceKillChildProcesses() โ exit       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โ HTTP + WebSocket
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                VSCode/Cursor Extension                       โ
โ  1. ะัะธ ััะฐััะต: POST /api/sessions/connect + sourceLabel    โ
โ  2. ะะพะปััะฐะตั: sessionId + mcpServers endpoints              โ
โ  3. ะกะปััะฐะตั: WebSocket /events ะดะปั ะพะฑะฝะพะฒะปะตะฝะธะน               โ
โ  4. UI ะฟะพะบะฐะทัะฒะฐะตั: "Cursor" ะฒ ัะฟะธัะบะต workspaces            โ
โ  5. ะัะธ ะทะฐะบัััะธะธ: POST /api/sessions/disconnect             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะัะธะพัะธัะตัั ะฝะฐ ะฑัะดััะตะต

### ะััะพะบะธะน ะฟัะธะพัะธัะตั
1. **VSCode Extension** - ะฑะฐะทะพะฒะฐั ะฒะตััะธั ะดะปั ัะตััะธัะพะฒะฐะฝะธั ะธะฝัะตะณัะฐัะธะธ
2. **Toast ัะฒะตะดะพะผะปะตะฝะธั** - feedback ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั

### ะกัะตะดะฝะธะน ะฟัะธะพัะธัะตั
3. **VP ะฝะฐัะปะตะดะพะฒะฐะฝะธะต** - ะบะพะฟะธัะพะฒะฐะฝะธะต ะบะพะฝัะธะณะพะฒ ะฟัะธ ัะพะทะดะฐะฝะธะธ workspace
4. **Loading/Empty states** - ัะปัััะตะฝะธะต UX

### ะะธะทะบะธะน ะฟัะธะพัะธัะตั
5. **ะขะตััั** - unit ะธ integration
6. **ะะพะบัะผะตะฝัะฐัะธั** - README, API docs
